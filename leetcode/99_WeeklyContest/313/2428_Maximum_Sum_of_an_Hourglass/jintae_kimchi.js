/**
 * https://leetcode.com/contest/weekly-contest-313/problems/maximum-sum-of-an-hourglass/
 *
 * 주어진 2차원 배열에서 모래시계 모양의 인덱스를 더했을 때 나올 수 있는 가장 큰 값
 * 모래시계 모양은 문제설명 참고.
 * @param {number[][]} grid
 * @return {number}
 */
var maxSum = function (grid) {
  // 브루트포스로 하면 풀기 엄청 쉬운데 성능개선을 하기 위한 방법이 뭐가 있을까?
  // 브루트포스 기반이면 같은 인덱스에 대한 계산이 여러 번 발생할 수 있음을 확인할 수 있음
  // 엘리먼트 범위가 10^6 인거로 봐선 중요해보임
  // 3칸의 계산을 한 다른 배열을 만들면 연산은 빨라지지 않을까?
  /**
   *  6   2   1   3
   *  4   2   1   5
   *  9   2   8   7
   *  4   1   2   9
   *
   *  9   6
   *  7   8
   *  19  17
   *  7   12
   *
   * 가운데는 원본인덱스안의 값을 써야 함
   *  9(6+2+1) + 2 + 19(9+2+8) = 30
   *  6(2+1+3) + 1 + 17(2+8+7) = 25
   *  7(4+2+1) + 2 + 7(4+1+2) = 16
   *  ...
   *
   * 두 가지 방식 모두 구현해서 테스트 해봤는데 먼가 차이가 거의 안느껴짐..
   * 어차피 미리 계산한다해도 계산한 값끼리 또 더하는 과정이 있다면 별 의미가 없는 걸까?
   * (1 + 1 + 1) + (1) + (1 + 1 +1) <-> (3) + (1) + (3)
   *
   * 그리고 확실한건 공간복잡도는 무조건 2N에 가깝게 올라간다는 것.
   * 바로 브루트포스로 풀었으면 10분도 안걸렸을건데..
   */

  const memArr = [];
  for (let r = 0; r < grid.length; r++) {
    memArr[r] = [];
    for (let c = 0; c < grid[r].length - 2; c++) {
      memArr[r][c] = grid[r][c] + grid[r][c + 1] + grid[r][c + 2];
    }
  }
  let max = -Infinity;
  for (let r = 0; r < memArr.length - 2; r++) {
    for (let c = 0; c < memArr[r].length; c++) {
      // top + mid + bot
      max = Math.max(max, memArr[r][c] + grid[r + 1][c + 1] + memArr[r + 2][c]);
    }
  }

  // 그냥 이렇게 심플하게 하고 시간아낄걸..
  // let max = -Infinity;
  // for (let r = 0; r < grid.length - 2; r++) {
  //   for (let c = 0; c < grid[r].length - 2; c++) {
  //     max = Math.max(
  //       max,
  //       grid[r][c] +
  //         grid[r][c + 1] +
  //         grid[r][c + 2] +
  //         grid[r + 1][c + 1] +
  //         grid[r + 2][c] +
  //         grid[r + 2][c + 1] +
  //         grid[r + 2][c + 2]
  //     );
  //   }
  // }

  return max;
};

const { runTestCase } = require("../../../utils");
console.time("a");
runTestCase(
  [
    {
      params: [
        [
          [6, 2, 1, 3],
          [4, 2, 1, 5],
          [9, 2, 8, 7],
          [4, 1, 2, 9],
        ],
      ],
      expect: 30,
    },
    {
      params: [
        [
          [1, 2, 3],
          [4, 5, 6],
          [7, 8, 9],
        ],
      ],
      expect: 35,
    },
    {
      params: [
        [
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
          [
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000, 100000,
            100000, 100000, 100000, 100000, 100000, 100000, 100000,
          ],
        ],
      ],
      expect: 700000,
    },
  ],
  maxSum
);
console.timeEnd("a");
